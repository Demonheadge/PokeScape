Tzhaar_Gym_Challenge_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, Tzhaar_Gym_Challenge_MapScripts_MAP_SCRIPT_ON_TRANSITION
	map_script MAP_SCRIPT_ON_FRAME_TABLE, Tzhaar_Gym_Challenge_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE
	.byte 0

Tzhaar_Gym_Challenge_MapScripts_MAP_SCRIPT_ON_TRANSITION:
	call TZHAAR_GYM_CHALLENGE_STATE
	return

Tzhaar_Gym_Challenge_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE:
	map_script_2 VAR_TEMP_D, 0, CHALLENGE_START
	.2byte 0


TZHAAR_GYM_CHALLENGE_STATE::
	removeobject 1
	setflag FLAG_TEMP_1
	removeobject 2
	setflag FLAG_TEMP_2
	removeobject 3
	setflag FLAG_TEMP_3
	removeobject 4
	setflag FLAG_TEMP_4
	removeobject 5
	setflag FLAG_TEMP_5
	removeobject 6
	setflag FLAG_TEMP_6
	removeobject 7
	setflag FLAG_TEMP_7
	removeobject 8
	setflag FLAG_TEMP_8
	removeobject 9
	setflag FLAG_TEMP_9
	removeobject 10
	setflag FLAG_TEMP_A
	return


FIGHT_CAVES_QUIT::
	lockall
	msgbox FIGHT_CAVES_QUIT_Text_0, MSGBOX_YESNO
	compare VAR_RESULT, 0
	goto_if_ne FIGHT_CAVES_QUIT_2
	closemessage
	applymovement OBJ_EVENT_ID_PLAYER, movement_lock_walk_up
	waitmovement 0
FIGHT_CAVES_QUIT_1:
	releaseall
	end

FIGHT_CAVES_QUIT_2:
	closemessage
	call FIGHT_CAVES_RESTRICTIONS_OFF
	warp MAP_TZHAAR_FIGHT_CAVES, 0
	waitstate
	goto FIGHT_CAVES_QUIT_1


FIGHTCAVES_SET_SPAWN_LOCATION_1::
	random 4
	switch VAR_RESULT
	case 0, FIGHTCAVES_SET_SPAWN_LOCATION_1_3
	case 1, FIGHTCAVES_SET_SPAWN_LOCATION_1_4
	case 2, FIGHTCAVES_SET_SPAWN_LOCATION_1_5
	case 3, FIGHTCAVES_SET_SPAWN_LOCATION_1_6
FIGHTCAVES_SET_SPAWN_LOCATION_1_1:
	return

FIGHTCAVES_SET_SPAWN_LOCATION_1_3:
	setobjectxyperm VAR_TEMP_F, 19, 14
	goto FIGHTCAVES_SET_SPAWN_LOCATION_1_1

FIGHTCAVES_SET_SPAWN_LOCATION_1_4:
	setobjectxyperm VAR_TEMP_F, 10, 5
	goto FIGHTCAVES_SET_SPAWN_LOCATION_1_1

FIGHTCAVES_SET_SPAWN_LOCATION_1_5:
	setobjectxyperm VAR_TEMP_F, 9, 10
	goto FIGHTCAVES_SET_SPAWN_LOCATION_1_1

FIGHTCAVES_SET_SPAWN_LOCATION_1_6:
	setobjectxyperm VAR_TEMP_F, 15, 8
	goto FIGHTCAVES_SET_SPAWN_LOCATION_1_1


FIGHTCAVES_SET_SPAWN_LOCATION_2::
	random 4
	switch VAR_RESULT
	case 0, FIGHTCAVES_SET_SPAWN_LOCATION_2_3
	case 1, FIGHTCAVES_SET_SPAWN_LOCATION_2_4
	case 2, FIGHTCAVES_SET_SPAWN_LOCATION_2_5
	case 3, FIGHTCAVES_SET_SPAWN_LOCATION_2_6
FIGHTCAVES_SET_SPAWN_LOCATION_2_1:
	return

FIGHTCAVES_SET_SPAWN_LOCATION_2_3:
	setobjectxyperm VAR_TEMP_F, 15, 3
	goto FIGHTCAVES_SET_SPAWN_LOCATION_2_1

FIGHTCAVES_SET_SPAWN_LOCATION_2_4:
	setobjectxyperm VAR_TEMP_F, 6, 15
	goto FIGHTCAVES_SET_SPAWN_LOCATION_2_1

FIGHTCAVES_SET_SPAWN_LOCATION_2_5:
	setobjectxyperm VAR_TEMP_F, 10, 12
	goto FIGHTCAVES_SET_SPAWN_LOCATION_2_1

FIGHTCAVES_SET_SPAWN_LOCATION_2_6:
	setobjectxyperm VAR_TEMP_F, 21, 13
	goto FIGHTCAVES_SET_SPAWN_LOCATION_2_1


FIGHTCAVES_SET_SPAWN_LOCATION_3::
	random 4
	switch VAR_RESULT
	case 0, FIGHTCAVES_SET_SPAWN_LOCATION_3_3
	case 1, FIGHTCAVES_SET_SPAWN_LOCATION_3_4
	case 2, FIGHTCAVES_SET_SPAWN_LOCATION_3_5
	case 3, FIGHTCAVES_SET_SPAWN_LOCATION_3_6
FIGHTCAVES_SET_SPAWN_LOCATION_3_1:
	return

FIGHTCAVES_SET_SPAWN_LOCATION_3_3:
	setobjectxyperm VAR_TEMP_F, 14, 17
	goto FIGHTCAVES_SET_SPAWN_LOCATION_3_1

FIGHTCAVES_SET_SPAWN_LOCATION_3_4:
	setobjectxyperm VAR_TEMP_F, 18, 19
	goto FIGHTCAVES_SET_SPAWN_LOCATION_3_1

FIGHTCAVES_SET_SPAWN_LOCATION_3_5:
	setobjectxyperm VAR_TEMP_F, 14, 6
	goto FIGHTCAVES_SET_SPAWN_LOCATION_3_1

FIGHTCAVES_SET_SPAWN_LOCATION_3_6:
	setobjectxyperm VAR_TEMP_F, 6, 12
	goto FIGHTCAVES_SET_SPAWN_LOCATION_3_1


FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE::
	switch VAR_TEMP_C
	case 0, FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_2
	case 1, FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_3
	case 3, FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_4
	case 4, FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_5
	case 7, FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_6
	return

FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_2:
	setvar VAR_TEMP_E, 1
	call FIGHTCAVES_WAVE_TRANSITION
	setvar VAR_TEMP_F, 1
	call FIGHTCAVES_SET_SPAWN_LOCATION_1
	addobject 1
	clearflag FLAG_TEMP_1
	return

FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_3:
	setvar VAR_TEMP_E, 2
	call FIGHTCAVES_WAVE_TRANSITION
	setvar VAR_TEMP_F, 1
	call FIGHTCAVES_SET_SPAWN_LOCATION_1
	addobject 1
	clearflag FLAG_TEMP_1
	setvar VAR_TEMP_F, 8
	call FIGHTCAVES_SET_SPAWN_LOCATION_2
	addobject 8
	clearflag FLAG_TEMP_8
	return

FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_4:
	setvar VAR_TEMP_E, 3
	call FIGHTCAVES_WAVE_TRANSITION
	setvar VAR_TEMP_F, 4
	call FIGHTCAVES_SET_SPAWN_LOCATION_1
	addobject 4
	clearflag FLAG_TEMP_4
	return

FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_5:
	setvar VAR_TEMP_E, 4
	call FIGHTCAVES_WAVE_TRANSITION
	setvar VAR_TEMP_F, 5
	call FIGHTCAVES_SET_SPAWN_LOCATION_1
	addobject 5
	clearflag FLAG_TEMP_5
	setvar VAR_TEMP_F, 6
	call FIGHTCAVES_SET_SPAWN_LOCATION_2
	addobject 6
	clearflag FLAG_TEMP_6
	setvar VAR_TEMP_F, 1
	call FIGHTCAVES_SET_SPAWN_LOCATION_3
	addobject 1
	clearflag FLAG_TEMP_1
	return

FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE_6:
	setvar VAR_TEMP_E, 5
	call FIGHTCAVES_WAVE_TRANSITION
	addobject 10
	clearflag FLAG_TEMP_A
	return


CHALLENGE_START::
	setvar VAR_TEMP_D, 1
	applymovement OBJ_EVENT_ID_PLAYER, ENTER_FIGHT_CAVES
	waitmovement 0
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	release
	end


ENTER_FIGHT_CAVES:
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_right
	walk_right
	walk_right
	walk_up
	walk_up
	walk_right
	face_down
	step_end

FIGHTCAVES_WAVE_TRANSITION::
	fadescreen FADE_TO_BLACK
	buffernumberstring 0, VAR_TEMP_E
	msgbox FIGHTCAVES_WAVE_TRANSITION_Text_0
	closemessage
	fadescreen FADE_FROM_BLACK
	return


ENEMY_TZKIH_1::
	call ENCOUNTER_TZ_KIH
	removeobject 1
	setflag FLAG_TEMP_1
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENEMY_TZKIH_2::
	call ENCOUNTER_TZ_KIH
	removeobject 2
	setflag FLAG_TEMP_2
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENEMY_TZKIH_3::
	call ENCOUNTER_TZ_KIH
	removeobject 3
	setflag FLAG_TEMP_3
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENEMY_GAAL_4::
	call ENCOUNTER_TZHAAR_TRAINER_GAAL
	return


ENEMY_GAAL_5::
	call ENCOUNTER_TZHAAR_TRAINER_GAAL
	return


ENEMY_KET_6::
	call ENCOUNTER_TZHAAR_TRAINER_KET
	return


ENEMY_KET_7::
	call ENCOUNTER_TZHAAR_TRAINER_KET
	return


ENEMY_KEK_8::
	call ENCOUNTER_TZ_KEK
	removeobject 8
	setflag FLAG_TEMP_8
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENEMY_KEK_9::
	call ENCOUNTER_TZ_KEK
	removeobject 9
	setflag FLAG_TEMP_9
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENEMY_CHAMPION_A::
	call GYMLEADER_TZHAAR_CHAMPION
	removeobject 10
	setflag FLAG_TEMP_A
	addvar VAR_TEMP_C, 1
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


ENCOUNTER_TZ_KIH::
	lock
	faceplayer
	namebox ENCOUNTER_TZ_KIH_Text_0
	playmoncry SPECIES_TZ_KIH, 0
	msgbox ENCOUNTER_TZ_KIH_Text_1
	waitmoncry
	hidenamebox
	closemessage
	delay 1
	switch VAR_TEMP_E
	case 1, ENCOUNTER_TZ_KIH_3
	case 2, ENCOUNTER_TZ_KIH_4
	case 3, ENCOUNTER_TZ_KIH_5
	case 4, ENCOUNTER_TZ_KIH_6
	case 5, ENCOUNTER_TZ_KIH_7
ENCOUNTER_TZ_KIH_1:
	dowildbattle
	switch VAR_RESULT
	case B_OUTCOME_WON, ENCOUNTER_TZ_KIH_10
	case B_OUTCOME_CAUGHT, ENCOUNTER_TZ_KIH_11
	release
	end

ENCOUNTER_TZ_KIH_3:
	setwildbattle SPECIES_TZ_KIH, 25, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KIH_1

ENCOUNTER_TZ_KIH_4:
	setwildbattle SPECIES_TZ_KIH, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KIH_1

ENCOUNTER_TZ_KIH_5:
	setwildbattle SPECIES_TZ_KIH, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KIH_1

ENCOUNTER_TZ_KIH_6:
	setwildbattle SPECIES_TZ_KIH, 35, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KIH_1

ENCOUNTER_TZ_KIH_7:
	setwildbattle SPECIES_TZ_KIH, 35, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KIH_1

ENCOUNTER_TZ_KIH_10:
	return

ENCOUNTER_TZ_KIH_11:
	return


ENCOUNTER_TZ_KEK::
	lock
	faceplayer
	namebox ENCOUNTER_TZ_KEK_Text_0
	playmoncry SPECIES_TZ_KEK, 0
	msgbox ENCOUNTER_TZ_KEK_Text_1
	waitmoncry
	hidenamebox
	closemessage
	delay 1
	switch VAR_TEMP_E
	case 1, ENCOUNTER_TZ_KEK_3
	case 2, ENCOUNTER_TZ_KEK_4
	case 3, ENCOUNTER_TZ_KEK_5
	case 4, ENCOUNTER_TZ_KEK_6
	case 5, ENCOUNTER_TZ_KEK_7
ENCOUNTER_TZ_KEK_1:
	dowildbattle
	switch VAR_RESULT
	case B_OUTCOME_WON, ENCOUNTER_TZ_KEK_10
	case B_OUTCOME_CAUGHT, ENCOUNTER_TZ_KEK_11
	release
	end

ENCOUNTER_TZ_KEK_3:
	setwildbattle SPECIES_TZ_KEK, 25, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KEK_1

ENCOUNTER_TZ_KEK_4:
	setwildbattle SPECIES_TZ_KEK, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KEK_1

ENCOUNTER_TZ_KEK_5:
	setwildbattle SPECIES_TZ_KEK, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KEK_1

ENCOUNTER_TZ_KEK_6:
	setwildbattle SPECIES_TZ_KEK, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KEK_1

ENCOUNTER_TZ_KEK_7:
	setwildbattle SPECIES_TZ_KEK, 30, ITEM_FIRECAPE
	goto ENCOUNTER_TZ_KEK_1

ENCOUNTER_TZ_KEK_10:
	return

ENCOUNTER_TZ_KEK_11:
	return


ENCOUNTER_TZHAAR_TRAINER_GAAL::
	lock
	faceplayer
	switch VAR_TEMP_E
	case 0, ENCOUNTER_TZHAAR_TRAINER_GAAL_3
	case 1, ENCOUNTER_TZHAAR_TRAINER_GAAL_3
	case 3, ENCOUNTER_TZHAAR_TRAINER_GAAL_3
	case 4, ENCOUNTER_TZHAAR_TRAINER_GAAL_3
	case 7, ENCOUNTER_TZHAAR_TRAINER_GAAL_3
ENCOUNTER_TZHAAR_TRAINER_GAAL_1:
	return

ENCOUNTER_TZHAAR_TRAINER_GAAL_3:
	call TZHAAR_TRAINERS_WAVES_LOW_GAAL
	goto ENCOUNTER_TZHAAR_TRAINER_GAAL_1


TZHAAR_TRAINERS_WAVES_LOW_GAAL::
	random 3
	switch VAR_RESULT
	case 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_2
	case 1, TZHAAR_TRAINERS_WAVES_LOW_GAAL_3
	case 2, TZHAAR_TRAINERS_WAVES_LOW_GAAL_4
	return

TZHAAR_TRAINERS_WAVES_LOW_GAAL_2:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_1, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return

TZHAAR_TRAINERS_WAVES_LOW_GAAL_3:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_2, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_2, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return

TZHAAR_TRAINERS_WAVES_LOW_GAAL_4:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_3, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_3, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return


ENCOUNTER_TZHAAR_TRAINER_KET::
	lock
	faceplayer
	switch VAR_TEMP_E
	case 0, ENCOUNTER_TZHAAR_TRAINER_KET_3
	case 1, ENCOUNTER_TZHAAR_TRAINER_KET_3
	case 3, ENCOUNTER_TZHAAR_TRAINER_KET_3
	case 4, ENCOUNTER_TZHAAR_TRAINER_KET_3
	case 7, ENCOUNTER_TZHAAR_TRAINER_KET_3
ENCOUNTER_TZHAAR_TRAINER_KET_1:
	return

ENCOUNTER_TZHAAR_TRAINER_KET_3:
	call TZHAAR_TRAINERS_WAVES_LOW_KET
	goto ENCOUNTER_TZHAAR_TRAINER_KET_1


TZHAAR_TRAINERS_WAVES_LOW_KET::
	random 3
	switch VAR_RESULT
	case 0, TZHAAR_TRAINERS_WAVES_LOW_KET_2
	case 1, TZHAAR_TRAINERS_WAVES_LOW_KET_3
	case 2, TZHAAR_TRAINERS_WAVES_LOW_KET_4
	return

TZHAAR_TRAINERS_WAVES_LOW_KET_2:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_1, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return

TZHAAR_TRAINERS_WAVES_LOW_KET_3:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_2, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_2, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return

TZHAAR_TRAINERS_WAVES_LOW_KET_4:
	trainerbattle TRAINER_BATTLE_CONTINUE_SCRIPT, TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_3, 0, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_3, TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1, CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO
	return


CONTINUE_AFTER_BATTLE_REMOVE_LASTTALKEDTO::
	removeobject VAR_LAST_TALKED
	addvar VAR_TEMP_C, 1
	call ClearGymTrainers_FIGHTCAVE
	call FIGHT_CAVES_CHECK_IF_GOTO_NEXT_WAVE
	return


SetGymTrainers_FIGHTCAVE::
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_1
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_2
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_3
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_1
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_2
	settrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_3
	return


ClearGymTrainers_FIGHTCAVE::
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_1
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_2
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_GAAL_3
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_1
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_2
	cleartrainerflag TRAINER_TZHAAR_FIGHTCAVES_LOW_KET_3
	return


TZHAAR_GYM_CHALLENGE_WAVE1::
	msgbox TZHAAR_GYM_CHALLENGE_WAVE1_Text_0
	closemessage
	applymovement 1, movement_TZHAAR_GYM_WAVES_1
	applymovement 2, movement_TZHAAR_GYM_WAVES_2
	applymovement 3, movement_TZHAAR_GYM_WAVES_3
	delay 90
	msgbox ENCOUNTER_TZ_KIH_Text_1
	closemessage
	removeobject 1
	removeobject 2
	removeobject 3
	setflag FLAG_TEMP_1
	setflag FLAG_TEMP_2
	setflag FLAG_TEMP_3
	msgbox TZHAAR_GYM_CHALLENGE_WAVE1_Text_1
	closemessage
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	addvar VAR_TEMP_0, 4
	addvar VAR_TEMP_1, 4
	setobjectxyperm 1, VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_0, 4
	subvar VAR_TEMP_1, 3
	setobjectxyperm 2, VAR_TEMP_0, VAR_TEMP_1
	addobject 1
	addobject 2
	addobject 3
	clearflag FLAG_TEMP_1
	clearflag FLAG_TEMP_2
	clearflag FLAG_TEMP_3
	msgbox ENCOUNTER_TZ_KIH_Text_1
	closemessage
	msgbox TZHAAR_GYM_CHALLENGE_WAVE1_Text_2
	closemessage
	playmoncry SPECIES_TZ_KIH, 1
	msgbox ENCOUNTER_TZ_KIH_Text_1
	waitmoncry
	closemessage
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_1, 2
	setobjectxyperm 1, VAR_TEMP_0, VAR_TEMP_1
	release
	end


movement_TZHAAR_GYM_WAVES_1:
	walk_down
	walk_down
	walk_down
	step_end

movement_TZHAAR_GYM_WAVES_2:
	walk_right
	walk_right
	walk_right
	step_end

movement_TZHAAR_GYM_WAVES_3:
	walk_left
	walk_left
	walk_left
	step_end

RANDOM_ENEMY_SPAWN::
	compare VAR_TEMP_A, 1
	goto_if_eq RANDOM_ENEMY_SPAWN_2
	compare VAR_TEMP_B, 1
	goto_if_eq RANDOM_ENEMY_SPAWN_3
RANDOM_ENEMY_SPAWN_1:
	return

RANDOM_ENEMY_SPAWN_2:
	random 2
	switch VAR_RESULT
	case 0, RANDOM_ENEMY_SPAWN_7
	case 1, RANDOM_ENEMY_SPAWN_8
	goto RANDOM_ENEMY_SPAWN_1

RANDOM_ENEMY_SPAWN_3:
	random 2
	switch VAR_RESULT
	case 0, RANDOM_ENEMY_SPAWN_10
	case 1, RANDOM_ENEMY_SPAWN_11
	goto RANDOM_ENEMY_SPAWN_1

RANDOM_ENEMY_SPAWN_7:
	call SPAWN_TZKIH_A
	goto RANDOM_ENEMY_SPAWN_1

RANDOM_ENEMY_SPAWN_8:
	call SPAWN_GAAL_A
	goto RANDOM_ENEMY_SPAWN_1

RANDOM_ENEMY_SPAWN_10:
	call SPAWN_TZKIH_B
	goto RANDOM_ENEMY_SPAWN_1

RANDOM_ENEMY_SPAWN_11:
	call SPAWN_GAAL_B
	goto RANDOM_ENEMY_SPAWN_1


RANDOM_ENEMY_SPAWN_LOCATION::
	random 8
	switch VAR_RESULT
	case 0, RANDOM_ENEMY_SPAWN_LOCATION_3
	case 1, RANDOM_ENEMY_SPAWN_LOCATION_4
	case 2, RANDOM_ENEMY_SPAWN_LOCATION_5
	case 3, RANDOM_ENEMY_SPAWN_LOCATION_6
	case 4, RANDOM_ENEMY_SPAWN_LOCATION_7
	case 5, RANDOM_ENEMY_SPAWN_LOCATION_8
	case 6, RANDOM_ENEMY_SPAWN_LOCATION_9
	case 7, RANDOM_ENEMY_SPAWN_LOCATION_10
RANDOM_ENEMY_SPAWN_LOCATION_1:
	return

RANDOM_ENEMY_SPAWN_LOCATION_3:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	addvar VAR_TEMP_1, 1
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_4:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_1, 1
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_5:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	addvar VAR_TEMP_0, 1
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_6:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_0, 1
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_7:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	addvar VAR_TEMP_1, 2
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_8:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_1, 2
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_9:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	addvar VAR_TEMP_0, 2
	goto RANDOM_ENEMY_SPAWN_LOCATION_1

RANDOM_ENEMY_SPAWN_LOCATION_10:
	getplayerxy VAR_TEMP_0, VAR_TEMP_1
	subvar VAR_TEMP_0, 2
	goto RANDOM_ENEMY_SPAWN_LOCATION_1


TRIGGER_ENEMY_SPAWN_A::
	call RANDOM_ENEMY_SPAWN_LOCATION
	call RANDOM_ENEMY_SPAWN
	setvar VAR_TEMP_A, 2
	release
	end


SPAWN_TZKIH_A::
	setobjectxyperm 1, VAR_TEMP_0, VAR_TEMP_1
	addobject 1
	clearflag FLAG_TEMP_1
	playmoncry SPECIES_TZ_KIH, 1
	namebox ENCOUNTER_TZ_KIH_Text_0
	msgbox ENCOUNTER_TZ_KIH_Text_1
	waitmoncry
	closemessage
	return


SPAWN_GAAL_A::
	setobjectxyperm 4, VAR_TEMP_0, VAR_TEMP_1
	addobject 4
	clearflag FLAG_TEMP_4
	namebox SPAWN_GAAL_A_Text_0
	msgbox SPAWN_GAAL_A_Text_1
	closemessage
	return


ENEMY_TZKIH_A::
	removeobject 1
	setflag FLAG_TEMP_1
	setvar VAR_TEMP_A, 1
	return


ENEMY_GAAL_A::
	removeobject 4
	setflag FLAG_TEMP_4
	setvar VAR_TEMP_A, 1
	return


TRIGGER_ENEMY_SPAWN_B::
	call RANDOM_ENEMY_SPAWN_LOCATION
	call RANDOM_ENEMY_SPAWN
	setvar VAR_TEMP_B, 2
	release
	end


SPAWN_TZKIH_B::
	setobjectxyperm 2, VAR_TEMP_0, VAR_TEMP_1
	addobject 2
	clearflag FLAG_TEMP_2
	playmoncry SPECIES_TZ_KIH, 1
	namebox ENCOUNTER_TZ_KIH_Text_0
	msgbox ENCOUNTER_TZ_KIH_Text_1
	waitmoncry
	closemessage
	return


SPAWN_GAAL_B::
	setobjectxyperm 5, VAR_TEMP_0, VAR_TEMP_1
	addobject 5
	clearflag FLAG_TEMP_5
	namebox SPAWN_GAAL_A_Text_0
	msgbox SPAWN_GAAL_A_Text_1
	closemessage
	return


ENEMY_TZKIH_B::
	removeobject 2
	setflag FLAG_TEMP_2
	setvar VAR_TEMP_B, 1
	return


ENEMY_GAAL_B::
	removeobject 5
	setflag FLAG_TEMP_5
	setvar VAR_TEMP_B, 1
	return


GYMLEADER_TZHAAR_CHAMPION::
	lock
	faceplayer
	namebox GYMLEADER_TZHAAR_CHAMPION_Text_0
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_1
	hidenamebox
	closemessage
	call GYM_BATTLE_TZHAAR_CHAMPION
	namebox GYMLEADER_TZHAAR_CHAMPION_Text_0
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_2
	hidenamebox
	closemessage
	playfanfare MUS_PS_QUEST_COMPLETE
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_3
	waitfanfare
	waitmessage
	namebox GYMLEADER_TZHAAR_CHAMPION_Text_0
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_4
	hidenamebox
	giveitem ITEM_TM48, 1
	compare VAR_RESULT, FALSE
	goto_if_eq Common_EventScript_ShowBagIsFull
	playbgm MUS_PS_ALKHARID, 0
	savebgm MUS_PS_ALKHARID
	namebox GYMLEADER_TZHAAR_CHAMPION_Text_0
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_5
	setvar VAR_POKESCAPE_TZHAAR_GYM_QUEST, 30
	setflag FLAG_BADGE05_GET
	addvar VAR_GAMEMODE_LEVEL_SCALING, 1
	msgbox GYMLEADER_TZHAAR_CHAMPION_Text_6
	call FIGHT_CAVES_FINISHED
	release
	end


FIGHT_CAVES_QUIT_Text_0:
	.string "Would you like to quit your challenge?$"

FIGHTCAVES_WAVE_TRANSITION_Text_0:
	.string "WAVE: {STR_VAR_1}$"

ENCOUNTER_TZ_KIH_Text_0:
	.string "Tz-Kih$"

ENCOUNTER_TZ_KIH_Text_1:
	.string "Keehsse!$"

ENCOUNTER_TZ_KEK_Text_0:
	.string "Tz-Kek$"

ENCOUNTER_TZ_KEK_Text_1:
	.string "Kekkekkek!$"

TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_0:
	.string "intro text 1$"

TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_1:
	.string "lose text$"

TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_2:
	.string "intro text 2$"

TZHAAR_TRAINERS_WAVES_LOW_GAAL_Text_3:
	.string "intro text 3$"

TZHAAR_GYM_CHALLENGE_WAVE1_Text_0:
	.string "WAVE 1.$"

TZHAAR_GYM_CHALLENGE_WAVE1_Text_1:
	.string "WAVE 2.$"

TZHAAR_GYM_CHALLENGE_WAVE1_Text_2:
	.string "WAVE 3.$"

SPAWN_GAAL_A_Text_0:
	.string "Ga'al$"

SPAWN_GAAL_A_Text_1:
	.string "Surpirse battle!$"

GYMLEADER_TZHAAR_CHAMPION_Text_0:
	.string "Kimit-Kal$"

GYMLEADER_TZHAAR_CHAMPION_Text_1:
	.string "Well done making it this far.\p"
	.string "Very well.\n"
	.string "Show me what you got.$"

GYMLEADER_TZHAAR_CHAMPION_Text_2:
	.string "You have done very well.\p"
	.string "To mark your triumph, accept this gym\n"
	.string "badge.$"

GYMLEADER_TZHAAR_CHAMPION_Text_3:
	.string "{PLAYER} received the TZHAAR BADGE\n"
	.string "from Kimit-Kal.$"

GYMLEADER_TZHAAR_CHAMPION_Text_4:
	.string "Also have this Scroll.$"

GYMLEADER_TZHAAR_CHAMPION_Text_5:
	.string "That move is called Power Gem.\p"
	.string "It sparkles just as all our precious\n"
	.string "Gems around the palace do.$"

GYMLEADER_TZHAAR_CHAMPION_Text_6:
	.string "Now let us return outside.$"
